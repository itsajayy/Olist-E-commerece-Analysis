# Olist-E-commerece-Analysis

### OverView

  Olist is a Brazilian e-commerce platform that connects small and medium-sized businesses to customers across Brazil. The platform operates as a marketplace, where merchants can list their products and services and customers can browse and purchase them online.

### Dataset Description

The dataset used for this challenge was pulled from [KAGGLE](https://www.kaggle.com/datasets/olistbr/brazilian-ecommerce) . It contains information on 100k orders from 2016 to 2018 made at multiple marketplaces in Brazil. Its features allow viewing orders from multiple dimensions: from order status, price, payment, and freight performance to customer location, product attributes, and finally reviews written by customers.

For this challenge, I used SQL to access the dataset, clean and perform Exploratory Data Analysis.

Below is the outline of the challenge
  - Explore Dataset and perform Data Validation
  - Data Cleaning
  - Answer Business Questions and Perform Exploratory Data Analysis
  - Share Insights and Make recommendations
### Data Schema:

The schema is as shown as below:
          ![image](https://github.com/itsajayy/Olist-E-commerece-Analysis/assets/135236892/a821d3ef-c56b-4247-a26f-3fb0708994fb)
          

### Step 1. Data Cleaning and exploration 
#### Tool Used : Excel

- This dataset contains 9 tables which were explored with excel to examine the quality of the data.
  The dataset is examined to check for:
    -  *Null Values* 
    -  *Unwanted Special Characters*
    - *Irrelevent rows and columns*
- Different Tables are mentioned here:

#### Customers Table
  - This table has 5 columns.
  - No duplicates are found.
  - No Null values.
#### Geolocations Table
  - This table has 5 columns.
  - Duplicates are found
  - Contains alot of spelling mistakes and different variations of the same city name.
    For ex: Sao paulo is mentioned as Sao Paulo, $ao paulo, S@o Paulo, saopaulo, etc
#### Order_items Table
  - This table has 7 columns.
  - No Duplicates
  - No Missing values.
#### Orders Table
  - This table has 8 columns.
  - Missing Values are removed.
  - No Duplicates.
#### Payment Table
  - This table has 5 columns.
  - There are some ‘payment_type’ values that are undefined. these will be ignored during analysis. It’s three values. These should be negligible.
  - No Duplicates.
#### Product Translation Table
  - This table has 2 columns.
  - No duplicates are found
  - No Null values.
#### Product Table
  - This table has 9 columns.
  - No Duplicates.
#### Reviews Table
  - This table has 7 columns.
  - No Duplicates.
#### Seller Table
  - This table has 4 columns.
  - No Duplicates.
  - No Null values.

## Answer Business Questions and Perform Exploratory Data Analysis

  <details> 
    <summary><h4> What is the total revenue generated by Olist, and how has it changed over time? </h4></summary>
    
  ```sql
       SELECT round(sum(payment_value),2) As Total_Revenue
       FROM payments;
  ```
  - The total Revenue generated was around **16008872.12**
  - Total income broken down over the years:
    
      ```sql
         SELECT FORMAT(sum(payment_value),2) as total_revenue , Year(order_estimated_delivery_date) as YEAR
         FROM payments p 
         JOIN orders o on p.order_id = o.order_id
         group by Year;
       ```
 
   ![question 1](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/34f73ab6-9426-405e-8f6e-e9565e8e17e7)
      
- 2018 had the highest revenue of the three years recorded.
- Total income broken down by month:
  ```sql
        SELECT
      EXTRACT(YEAR FROM order_estimated_delivery_date) AS year,
      EXTRACT(MONTH FROM order_estimated_delivery_date) AS month,
      ROUND(SUM(payment_value), 2) AS Revenue
      FROM
      payments
      LEFT JOIN
      orders ON payments.order_id = orders.order_id
      WHERE
      purchased_timestamp IS NOT NULL
      GROUP BY
      year, month
      ORDER BY
      year;
  ```
  ![question 1b](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/f090b36d-87c2-40d7-a2c2-b6b3965cf975)

- 2018 has the highest revenue. Compared to 2017, this is an upward trend.
- 2016 has records for 4 months which explains why the value is drastically low by comparison to the following years.

</details> 
  
  <details>
    <summary><h4>What are the most popular product categories on Olist, and how do their sales volumes compare to each other?</h4></summary>

``` sql
      select category_english_name as Category, count(*) as Orders_per_category
      from products
      group by category_english_name
      order by count(*) desc;
```
  ![top categories](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/88e8baba-11d5-4983-a54d-18649416bd0a)

- The top 5 popular categories are -
       - *bed_bath_table*
       - *sports_leisure*
       - *furniture_decor*
       - *health_beauty*
       - *housewares*

  </details>

  <details>
    <summary><h4>What is the average order value (AOV) on Olist, and how does this vary by product category or payment method? </h4></summary>

- By payments:
 ``` sql
    select payment_type,round(sum(payment_value)/count(distinct order_id),2) as AOV 
     from payments
     group by payment_type;
 ```
  ![aov by pmt](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/8624ae97-a8e6-4fa6-92e9-147affefc710)
    - Credit card has the highest AOV amongst the payment types.

- By products:
  ``` sql
          select p.category_english_name as category,round(sum(payment_value)/count(distinct order_id),2) as AOV 
          from orders o join payments pa
          using (order_id)
          join order_items oi 
          using (order_id)
          join products p 
          using (product_id)
          group by 1 
          order by 2 desc;
  ```
  ![aov by prod](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/3628c31e-32b1-4df7-9f4d-379785cfeb7b)
  - The average order value is highest for the computer category(1551.82), followed by fixed_telephony (907.26), and small_appliances_home_oven_and_coffee(698.36).

</details>

<details>
  <summary><h4> What are the top-selling products on Olist? How have their sales trends changed over time? </h4></summary>

``` sql
select year(o.order_purchase_timestamp) as Year, (oi.product_id) as Product, count((oi.product_id)) as Total_Product,
  round(sum(pa.payment_value),2) Revenue
from products p join order_items oi 
USING(product_id)
join order_payments pa using(order_id)
join orders o using(order_id)
where order_status <> 'canceled' and order_purchase_timestamp is not null
group by 2, 1
order by 4 desc;
```

![topsellingprod](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/c20a0742-60e9-482b-bd40-2d20246e768c)

- The data did not have the actual product names. Only product IDs. The products ordered by revenue can be observed in the figure above.

</details>


<details>
  <summary><h4> The Weekday Vs Weekend Payment Statistics. </h4></summary>

```sql
SELECT
    kpil.Day_End,
    ROUND((kpil.Total_pmt / (SELECT SUM(payment_value) FROM payments) * 100), 2) AS payment_value
FROM
    (
        SELECT
            ord.Day_End,
            SUM(pmt.payment_value) AS Total_pmt
        FROM
            payments pmt
            JOIN (
                SELECT DISTINCT(order_id),
                    CASE
                        WHEN WEEKDAY(purchased_timestamp) IN (5, 6) THEN "Weekend"
                        ELSE "Weekday"
                    END AS Day_End
                FROM
                    orders
            ) AS ord ON ord.order_id = pmt.order_id
        GROUP BY
            ord.Day_End
    ) AS kpil;
```
![weekendvsweekday](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/34d94a72-d98f-4510-b188-2440a31e564f)
- We can see that almost 75% of the orders placed and the payments receieved are during the weekday i.e. from Mon - Fri.

</details>

<details>
  <summary><h4> Number of Orders with review score 5 and payment type as credit card. </h4></summary>

``` sql
SELECT
    pmt.payment_type,
    COUNT(pmt.order_id) AS Total_Orders
FROM
    payments AS pmt
JOIN (
    SELECT
        ord.order_id,
        rw.review_score
    FROM
        orders AS ord
    JOIN
        reviews AS rw ON ord.order_id = rw.order_id
    WHERE
        rw.review_score = 5
) AS rw5 ON pmt.order_id = rw5.order_id
GROUP BY
    pmt.payment_type
ORDER BY
    Total_Orders DESC;
```

![payment](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/218b4955-9af7-4ace-a4bc-c42cfe8f5b8e)

-  It is evident that credit card is the most popular payment method among customers, constituting a significant portion of the total orders with 44,140 transactions.
-  Boleto and voucher payments follow, with 11,275 and 3,197 total orders, respectively.
-  Debit card transactions represent a smaller proportion compared to the other payment types, with a total of 920 orders.
-   This suggests a clear preference for credit card payments among the customers, indicating a higher level of trust or convenience associated with this payment method.

</details>

<details>
  <summary><h4> Average number of days taken for order_delivered_customer_date. </h4></summary>

  ``` sql
SELECT
    prod.category_name,
    ROUND(AVG(DATEDIFF(ord.order_delivered_customer_date, ord.purchased_timestamp)), 0) AS avg_delivery_date
FROM
    orders AS ord
JOIN
    (
        SELECT
            oi.product_id,
            oi.order_id,
            p.category_name
        FROM
           products AS p
        JOIN
            order_items AS oi ON p.product_id = oi.product_id
    ) AS prod ON ord.order_id = prod.order_id
GROUP BY
    prod.category_name;
```
![add](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/f6260710-d9ff-460d-b731-07693ee489e2)

-  Categories such as "pet_shop" and "utilidades_domesticas" have notably quick average delivery times, categories like "ferramentas_jardim" and "telefonia" have slightly longer delivery times.
- Delivery durations may be influenced by the nature of the products or specific logistical considerations within each category. 
- Customers may find this information valuable when setting delivery expectations based on the product category they choose.
  
</details>

<details>
  <summary><h4> Relationship between shipping days (order_delivered_customer_date - order_purchase_timestamp) Vs review scores. </h4></summary>

``` sql

SELECT
    rw.review_score,
    ROUND(AVG(DATEDIFF(ord.order_delivered_customer_date, ord.purchased_timestamp)), 0) AS avg_shipping_days
FROM
    orders AS ord
JOIN
    reviews AS rw ON rw.order_id = ord.order_id
GROUP BY
    rw.review_score
ORDER BY
    rw.review_score;
```

![reviews](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/7f5fb3de-da8c-4327-9bb4-a441df2e19d5)

- Examining the relationship between review scores and average shipping days, a clear pattern emerges. As the review score increases, indicating higher customer satisfaction, the average shipping days decrease. For instance, orders with a review score of 5 have the quickest average shipping time, taking only 11 days on average. Conversely, lower review scores are associated with longer shipping durations, with the highest average of 21 days for orders with a review score of 1.

- This correlation suggests that there is a positive relationship between customer satisfaction, as reflected in review scores, and the efficiency of the shipping process. It underscores the importance of timely deliveries in shaping positive customer experiences and higher review scores. Businesses may find this insight valuable in emphasizing the significance of prompt and reliable shipping to enhance overall customer satisfaction.

</details>

<details>
  <summary><h4> Average price and payment values from customers of sao paulo city. </h4></summary>

-  Average Price of Sao Paulo city
``` sql
SELECT
    cust.customer_city,
    ROUND(AVG(pmt_price.price), 0) AS avg_price
FROM
    customers AS cust
JOIN (
    SELECT
        pymnt.customer_id,
        pymnt.payment_value,
        item.price
    FROM
        order_items AS item
    JOIN (
        SELECT
            ord.order_id,
            ord.customer_id,
            pmt.payment_value
        FROM
            orders AS ord
        JOIN
            payments AS pmt ON ord.order_id = pmt.order_id
    ) AS pymnt ON item.order_id = pymnt.order_id
) AS pmt_price ON cust.customer_id = pmt_price.customer_id
WHERE
    cust.customer_city = 'sao paulo'
GROUP BY
    cust.customer_city;
```
![avg price](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/cadc06f2-1cbc-41a2-93d6-45470409630c)

  - The average price of sao paulo is 107

- Average Payment Value of Sao Paulo City

``` sql   
    SELECT
    cust.customer_city,
    ROUND(AVG(pmt.payment_value), 0) AS avg_payment_value
FROM
    customers AS cust
INNER JOIN orders AS ord ON cust.customer_id = ord.customer_id
INNER JOIN payments AS pmt ON ord.order_id = pmt.order_id
WHERE
    cust.customer_city = 'sao paulo'
GROUP BY
    cust.customer_city;
```
![avg pmt](https://github.com/itsajayy/Web_Scraping-and-EDA/assets/135236892/9024d34a-b836-415b-92e8-f2275b331ae6)

  - The average payment Value of Sao Paulo city is 134

</details>

### Visualizations

Ive created dashboards on Excel, Power Bi as well as Tableau and have uploaded them here on github. Please check them out for your reference!

### Insights

- Olist makes more money not by selling a few products a lot, but by selling a lot of different products.
- Olist overall revenue had a consistent rise throughout the years but peaked in 2018.
- Olist had a monthly average of 4,143 orders placed on their platform
- Bed Bath Table is the most popular product category on Olist based on the number of orders made.
- While the bed_bath_table category had the highest no of products purchased, it didn't translate into a better revenue-to-order count ratio (i.e. AOV). This means customers purchased more bed_bath_table items but spent more money on average on expensive items like computers.

### Recommendations

- For Olist to maximize sales performance, profitability, and customer satisfaction, the company will need to carefully employ different pricing strategies.
- Olist needs to employ loyalty programs to help improve customer retention rates. Customers seem to be satisfied with their orders based on the result of the low customer cancelation rate.

### Challenges/Limitations

- To better understand the Olist E-commerce market environment, we will need a longer period of datasets.
- Getting datasets of other similar companies in the same industry for comparison will be needed.


 

